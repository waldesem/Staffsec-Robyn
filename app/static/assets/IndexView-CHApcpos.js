import{o as M,_ as j,a as E,b as P,c as R,d as S,e as T,f as q}from"./ResumeForm.vue_vue_type_script_setup_true_lang-Cb1XuC_A.js";import{d as A,u as H,a as G,o as J,w as x,r as K,b as o,c as w,e as d,f as n,_ as O,g as t,h as v,F as y,i as g,t as $,j as Q,k as W,l as X,m as r}from"./index-DqR8deQR.js";const Y={class:"my-6"},Z={class:"relative overflow-auto"},ee={class:"table-fixed min-w-full overflow-clip"},ae={class:"relative"},te={class:"isolate divide-y divide-default"},ne=["onClick"],se={class:"py-3"},le={class:"flex justify-center border-t border-default space-x-2 py-4"},re=A({__name:"IndexView",setup(oe){const C=H(),b=G(),k=[{name:"id",header:"#"},{name:"surname",header:"Фамилия"},{name:"firstname",header:"Имя"},{name:"patronymic",header:"Отчество"},{name:"birthday",header:"Дата рождения",cell:l=>new Date(l.birthday).toLocaleDateString()},{name:"created",header:"Обновлено",cell:l=>X(l.created).value}],u=r({has_next:!1,candidates:[]}),c=r(!1),s=r(0),m=r(""),i=r("string");J(async()=>await _());async function _(){u.value=await M("/routes/candidates/"+s.value,{query:{search:m.value}})}x(K(m,1e3),async()=>{s.value===0?await _():s.value=0}),x(s,async()=>await _());function U(l,e){return c.value=!1,i.value="success",e&&C.add({title:"Информация",description:"Анкета уже была загружена ранее.",color:"info"}),b.push("/profile/"+l)}return(l,e)=>{const p=O,V=R,B=P,D=E,N=S,z=T,F=j,I=q;return o(),w(I,null,{default:d(()=>[n(F,null,{default:d(()=>[n(D,{title:"КАНДИДАТЫ"},{links:d(()=>[n(B,{open:c.value,"onUpdate:open":e[1]||(e[1]=a=>c.value=a),title:"Анкета",description:"Введите анкетные данные"},{body:d(()=>[n(V,{onUpdate:U})]),default:d(()=>[n(p,{label:"Добавить",variant:"outline",size:"sm",loading:i.value==="pending",onClick:e[0]||(e[0]=a=>c.value=!0)},null,8,["loading"])]),_:1},8,["open"])]),_:1}),t("div",Y,[n(N,{id:"search",modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=a=>m.value=a),modelModifiers:{trim:!0},type:"search",placeholder:"поиск по фаимилии, имени, отчеству"},null,8,["modelValue"])]),t("div",Z,[t("table",ee,[t("thead",ae,[t("tr",null,[(o(),v(y,null,g(k,(a,h)=>t("th",{key:h,class:"p-4 text-sm text-highlighted text-left"},$(a.header),1)),64))])]),t("tbody",te,[(o(!0),v(y,null,g(u.value.candidates,(a,h)=>(o(),v("tr",{key:h,class:"hover:bg-gray-100 cursor-pointer",onClick:f=>Q(b).push("/profile/"+a.id)},[(o(),v(y,null,g(k,(f,L)=>t("td",{key:L,class:"p-4 text-sm text-muted whitespace-nowrap"},$(f.cell?f.cell(a):a[f.name]),1)),64))],8,ne))),128))])])]),u.value.candidates?W("",!0):(o(),w(z,{key:0,title:"Данные отсутствуют",size:"sm",variant:"naked"})),t("div",se,[n(p,{variant:"outline",label:"Обновить данные",loading:i.value==="pending",size:"sm",onClick:e[3]||(e[3]=a=>_())},null,8,["loading"])]),t("div",le,[n(p,{label:"Back",disabled:!s.value||i.value=="pending",class:"me-2 rounded-full",onClick:e[4]||(e[4]=a=>s.value--)},null,8,["disabled"]),n(p,{label:"Next",disabled:!u.value.has_next||i.value=="pending",class:"ms-2 rounded-full",onClick:e[5]||(e[5]=a=>s.value++)},null,8,["disabled"])])]),_:1})]),_:1})}}});export{re as default};
